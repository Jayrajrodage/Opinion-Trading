syntax = "proto3";

package engine;


service Engine {
  rpc GetUserBalance(UserBalanceRequest) returns (UserBalanceResponse);
  rpc GetOrderBook(OrderBookRequest) returns (OrderBookResponse);
  rpc UpdateUserBalance (UpdateUserBalanceRequest) returns (UpdateUserBalanceResponse);
}

// ======================
// Request/Response Types
// ======================

message UserBalanceRequest {
  string email = 1;
}

message UserBalanceResponse {
  double availableBalance = 1;
  double lockedBalance = 2;
}

message OrderBookRequest {
  string symbol = 1; // e.g. BTC_USDT
  int32 limit = 2;   // number of bids/asks to return
}

message Order {
  double price = 1;
  double quantity = 2;
}

message OrderBookResponse {
  repeated Order bids = 1;
  repeated Order asks = 2;
}

message UpdateUserBalanceRequest {
  string email = 1;
  double availableBalance = 2;
  double lockedBalance = 3;
}

message UpdateUserBalanceResponse {
  string status = 1;
  string message = 2;
}
